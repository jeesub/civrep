<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
        <script type="text/javascript" src="https://www.airconsole.com/api/airconsole-1.7.0.js"></script>
        <style type=text/css>
            @import url('https://fonts.googleapis.com/css2?family=Quicksand&display=swap');
            body {
                -ms-user-select: none;
                -moz-user-select: none;
                -webkit-user-select: none;
                user-select: none;
                margin: 0;
                font-family: 'Quicksand', sans-serif;
                font-size: 5vw;
                line-height: 20pt;
                background-color: #D9D9D9;
            }

            input {
                width: 76%;
                height: 0vh;
                padding: 5vh 10vw;
                margin-top: 5vh;
                border-radius: 4px;
                text-align: center;
                font-size: 5vw;
            }

            /** General **/
            .alert {
                position: absolute;
                width: 80vw;
                margin-top: 15vh;
                margin-left: 5vw;
                z-index: 10;
                background-color: #ECA81C;
                padding: 5vh 5vw;
                text-align: center;
                border: 1vw solid #000;
                border-radius: 4vw;
            }
            .button {
                -webkit-border-radius: 11;
                -moz-border-radius: 11;
                border-radius: 11px;
                border: none;
                font-family: 'Quicksand', sans-serif;
                font-size: 4vw;
                background-color: #B2B2B2;
                color: #FFF;
                width: 100%;
                padding: 3vh 3vw;
                margin-bottom: 2vh;
            }

            .submit {
                position: absolute;
                width: 80vw;
                top: 88vh;
                left: 10vw;
                color: #FFF;
                background-color: #000;
            }

            .button:active {
                box-shadow: 0 1px #666;
                transform: translateY(4px);
            }

            .color-white {
                color: #FFF;
            }

            .bg-color0 {
                background-color: #3E5DAA;
            }

            .bg-color1 {
                background-color: #176F71;
            }

            .bg-color2 {
                background-color: #F2994A;
            }

            .bg-grey {
                color: #000;
                background-color: #D9D9D9;
            }

            .bg-letter {
                background-color: #B2585A;
            }

            .bg-map {
                background-color: #3C5B5C;
            }

            .bg-computer {
                background-color: #635D58;
            }

            .bg-rest {
                background-color: #62462B;
            }

            .selectable {
                border: 1vw solid #D9D9D9;
                border-radius: 2vw;
                margin-top: 2vh;
            }

            .selected {
                border: 1vw solid #000;
            }

            .controller-screen {
                position: absolute;
                background-repeat: no-repeat;
                padding: 0;
                margin: 0;
                width: 100vw;
                height: 100vh;
            }

            .controller-header {
                height: 8vh;
                padding: 1vh 1vh 1vh 1vh;
                font-size: 4vw;
                font-weight: 900;
                line-height: 3vh;
                color: #000;
                background-image: url("https://jeesub.github.io/assets/inventory/CivRep/imgs/CivRep_logo 1.png");
                background-position: center;
                background-size: contain;
                background-repeat: no-repeat;
                background-color: #FFF;
            }

            .controller-content {
                width: 90vw;
                height: 80vh;
                padding: 5vh 5vw;
            }

            .deactivated {
                display: none;
            }

            .centered {
                text-align: center;
                color: #FFF;
            }

            .title {
                font-weight: 900;
            }

            .full-width {
                width: 100%;
            }

            /** Custom **/
            .letter-button {
                background-position: center;
                background-size: contain;
                background-repeat: no-repeat;
                text-align: left;
                height: 19vh;
                background-color: #B2B2B2;
            }

            .letter-button-0 {
                background-image: url("https://jeesub.github.io/assets/inventory/CivRep/imgs/letters/letter-button-0.png");
            }

            .letter-button-1 {
                background-image: url("https://jeesub.github.io/assets/inventory/CivRep/imgs/letters/letter-button-1.png");
            }

            .mail-from {
                margin-bottom: 8vh;
                font-size: 3vw;
            }

            .img-button {
                width: 100%;
                margin-bottom: 2vh;
            }

            .vote {
                width: 44vw;
            }
        </style>

        <script type="text/javascript">
            var name;
            var selectedCharacter = -1;

            function App() {
                this.airconsole = new AirConsole({"orientation": "portrait", "synchronize_time" : "true"});

                this.airconsole.onMessage = function(from, data) {
                    // got a message
                    console.log("onMessage", from, data);
                    interpretMessage(data);
                };

                if (!("ontouchstart" in document.createElement("div"))) {
                    var elements = document.getElementsByTagName("*");
                    for (var i = 0; i < elements.length; ++i) {
                        var element = elements[i];
                        var ontouchstart = element.getAttribute("ontouchstart");
                        if (ontouchstart) {
                            element.setAttribute("onmousedown", ontouchstart);
                        }
                        var ontouchstart = element.getAttribute("ontouchstart");
                        if (ontouchstart) {
                            element.setAttribute("onmouseup", ontouchstart);
                        }
                    }
                }
            }

            App.prototype.sendMessageToScreen = function(msg) {
                console.log({"action": msg});
                this.airconsole.message(AirConsole.SCREEN, msg);
            }

            function interpretMessage(data) {
                var topic = data["topic"];
                console.log("topic: " + topic);
                switch (topic) {
                    case "screen":
                        //ex) {"topic": "screen", "message": "prep"}
                        activate(data["message"]);
                        break;
                    case "character selection":
                        console.log(data["message"]);
                        lockCharacter(data["message"]);
                        break;
                    case "info":
                        console.log(data["message"]);
                        setInfo(data["message"]);
                        break;
                    default:
                        break;
                }
            }

            function showAlert(message) {
                var elem = document.getElementById("alert");
                elem.innerHTML = message;
                elem.classList.remove("deactivated");
                setTimeout(removeAlert, 1500);
            }

            function removeAlert() {
                document.getElementById("alert").classList.add("deactivated");
            }

            function sendName(newName) {
                if (newName == '') {
                    showAlert("Name cannot be blank");
                } else {
                    name = newName;
                    var element =  document.getElementById('username');
                    element.innerHTML = name;
                    window.app.sendMessageToScreen({'Connected': name});
                    activate("idle");
                }
            }

            function activate(screen) {
                if (screen == "inventory") {
                    var restButton = document.getElementById("rest-button");
                    restButton.classList.add("deactivated");
                    screen = "prep";
                }
                var elements = document.getElementsByClassName("controller-screen");
                var i;
                for (i = 0; i < elements.length; i++) {
                    elements[i].classList.add("deactivated");
                }
                document.getElementById("screen-" + screen).classList.remove("deactivated");

                var destinationArr = ["letter", "computer", "map", "rest"];
                var destinationSet = new Set(destinationArr);
                if (destinationSet.has(screen)) {
                    window.app.sendMessageToScreen({'Destination': screen});
                }

                var arr = ["letter-0", "letter-1", "map-0", "map-1", "computer-0", "computer-1"];
                var set = new Set(arr);
                if (set.has(screen)) {
                    window.app.sendMessageToScreen({'Action': screen});
                }
            }

            function selectCharacter(selected) {
                selectedCharacter = selected;
                var elements = document.getElementsByClassName("character");
                var i;
                for (i = 0; i < elements.length; i++) {
                    elements[i].classList.remove("selected");
                    elements[i].classList.remove("selectedCharacter");
                }
                document.getElementById("character-" + selected).classList.add("selected");
                document.getElementById("character-" + selected).classList.add("selectedCharacter");
            }

            function submitCharacter() {
                if (selectedCharacter != -1) {
                    window.app.sendMessageToScreen({"Character": selectedCharacter});
                }
            }

            function lockCharacter(status){
                if (status) {
                    activate("name");
                    setInfo(selectedCharacter);
                } else {
                    showAlert("character was selected by another player");
                }                
            }

            function setInfo(num) {
                var letterButton0 = document.getElementById("letter-button-" + num + "-0");
                letterButton0.classList.remove("deactivated");
                var letterButton1 = document.getElementById("letter-button-" + num + "-1");
                letterButton1.classList.remove("deactivated");
                var letter0 = document.getElementById("letter-" + num + "-0");
                letter0.classList.remove("deactivated");
                var letter1 = document.getElementById("letter-" + num + "-1");
                letter1.classList.remove("deactivated");

                var mapButton0 = document.getElementById("map-button-" + num + "-0");
                mapButton0.classList.remove("deactivated");
                var mapButton1 = document.getElementById("map-button-" + num + "-1");
                mapButton1.classList.remove("deactivated");
                var map0 = document.getElementById("map-" + num + "-0");
                map0.classList.remove("deactivated");
                var map1 = document.getElementById("map-" + num + "-1");
                map1.classList.remove("deactivated");

                var reps = document.getElementsByClassName("rep-" + num);
                var i = 0;
                for (i = 0; i < reps.length; i++) {
                    reps[i].classList.remove("deactivated");
                }
            }

            function vote(target) {
                var nayIdle = document.getElementById("nay-idle");
                var nayActive = document.getElementById("nay-active");
                var yeaIdle = document.getElementById("yea-idle");
                var yeaActive = document.getElementById("yea-active");
                if (target == "nay") {
                    nayIdle.classList.add("deactivated");
                    nayActive.classList.remove("deactivated");
                    yeaIdle.classList.remove("deactivated");
                    yeaActive.classList.add("deactivated");
                    window.app.sendMessageToScreen({"Vote": "Nah"});
                }
                if (target == "yea") {
                    yeaIdle.classList.add("deactivated");
                    yeaActive.classList.remove("deactivated");
                    nayIdle.classList.remove("deactivated");
                    nayActive.classList.add("deactivated");
                    window.app.sendMessageToScreen({"Vote": "Yay"});
                }
            }
        </script>
    </head>
    <body onload="window.app = new App()">
        <!-- ALERT -->
        <div id="alert" class= "alert deactivated">ALERT</div>
        <!-- IDLE -->
        <div id="screen-idle" class="controller-screen">
            <div class="controller-header"></div>
            <div class="controller-content">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/CivRep_logo 1.png" width="100%">
                Please look up at the main screen.
            </div>
        </div>
        <!-- CHARACTER SELECTION -->
        <div id="screen-character" class="controller-screen deactivated">
            <div class="controller-header"></div>
            <div class="controller-content">
                <div id="character-0" class="character centered selectable bg-color0" ontouchstart="window.selectCharacter(0)">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/character-button-0.png" class="full-width">
                </div>
                <div id="character-1" class="character centered selectable bg-color1" ontouchstart="window.selectCharacter(1)">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/character-button-1.png" class="full-width">
                </div>
                <div id="character-2" class="character centered selectable bg-color2" ontouchstart="window.selectCharacter(2)">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/character-button-2.png" class="full-width">
                </div>
                <button class="button submit" ontouchstart="window.submitCharacter()">Enroll</button>
            </div>
        </div>
        <!-- NAME -->
        <div id="screen-name" class="controller-screen deactivated">
            <div class="controller-header"></div>
            <div class="controller-content">
                <div class="intro-description">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/name-description.png" class="full-width">
                    <input type="text" id="username" name="username" required minlength="1" maxlength="24" size="10" placeholder="Type your name"><br>
                    <button class="button submit" ontouchstart="window.sendName(getElementById('username').value)">Submit</button>
                </div>
            </div>
        </div>
        <!-- PREP ROOM -->
        <div id="screen-prep" class="controller-screen deactivated">
            <div class="controller-header"></div>
            <div class="controller-content">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/letter-button.png" class="img-button" ontouchstart="window.activate('letter')">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/map-button.png" class="img-button" ontouchstart="window.activate('map')">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/computer-button.png" class="img-button" ontouchstart="window.activate('computer')">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/rest-button.png" id="rest-button" class="img-button" ontouchstart="window.activate('rest')">
            </div>
        </div>
        <!-- COMPUTER -->
        <div id="screen-computer" class="controller-screen deactivated">
            <div class="controller-header"></div>
            <div class="controller-content bg-computer">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/computer/computer-description.png" class="full-width">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/computer/computer-button-0.png" class="img-button" ontouchstart="window.activate('computer-0')">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/computer/computer-button-1.png" class="img-button" ontouchstart="window.activate('computer-1')">
                <button class="button submit" ontouchstart="window.activate('prep')">Return</button>
            </div>
        </div>
        <!-- COMPUTER 0 -->
        <div id="screen-computer-0" class="controller-screen deactivated">
            <div class="controller-header"></div>
            <div class="controller-content bg-computer">
                <div id="computer-0">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/computer/computer-0.png" class="full-width">
                </div>
                <button class="button submit" ontouchstart="window.activate('computer')">Return</button>
            </div>
        </div>
        <!-- COMPUTER 1 -->
        <div id="screen-computer-1" class="controller-screen deactivated">
            <div class="controller-header"></div>
            <div class="controller-content bg-computer">
                <div id="computer-1">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/computer/computer-1.png" class="full-width">
                </div>
                <button class="button submit" ontouchstart="window.activate('computer')">Return</button>
            </div>
        </div>
        <!-- MAP -->
        <div id="screen-map" class="controller-screen deactivated">
            <div class="controller-header"></div>
            <div class="controller-content bg-map">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/maps/map-description.png" class="full-width">
                <div id="map-button-0" ontouchstart="window.activate('map-0')">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/maps/map-button-0-0.png" id="map-button-0-0" class="img-button deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/maps/map-button-1-0.png" id="map-button-1-0" class="img-button deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/maps/map-button-2-0.png" id="map-button-2-0" class="img-button deactivated">
                </div>
                <div id="map-button-1" ontouchstart="window.activate('map-1')">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/maps/map-button-0-1.png" id="map-button-0-1" class="img-button deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/maps/map-button-1-1.png" id="map-button-1-1" class="img-button deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/maps/map-button-2-1.png" id="map-button-2-1" class="img-button deactivated">
                </div>
                <button class="button submit" ontouchstart="window.activate('prep')">Return</button>
            </div>
        </div>
        <!-- MAP 0 -->
        <div id="screen-map-0" class="controller-screen deactivated">
            <div class="controller-header"></div>
            <div class="controller-content bg-map">
                <div id="map-0">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/maps/map-0-0.png" id="map-0-0" class="full-width deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/maps/map-1-0.png" id="map-1-0" class="full-width deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/maps/map-2-0.png" id="map-2-0" class="full-width deactivated">
                </div>
                <button class="button submit" ontouchstart="window.activate('map')">Return</button>
            </div>
        </div>
        <!-- MAP 1 -->
        <div id="screen-map-1" class="controller-screen deactivated">
            <div class="controller-header"></div>
            <div class="controller-content bg-map">
                <div id="map-1">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/maps/map-0-1.png" id="map-0-1" class="full-width deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/maps/map-1-1.png" id="map-1-1" class="full-width deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/maps/map-2-1.png" id="map-2-1" class="full-width deactivated">
                </div>
                <button class="button submit" ontouchstart="window.activate('map')">Return</button>
            </div>
        </div>
        <!-- LETTER -->
        <div id="screen-letter" class="controller-screen deactivated">
            <div class="controller-header"></div>
            <div class="controller-content bg-letter">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/letters/letter-description.png" class="full-width">
                <div id="letter-button-0" ontouchstart="window.activate('letter-0')">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/letters/letter-button-0-0.png" id="letter-button-0-0" class="img-button deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/letters/letter-button-1-0.png" id="letter-button-1-0" class="img-button deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/letters/letter-button-2-0.png" id="letter-button-2-0" class="img-button deactivated">
                </div>
                <div id="letter-button-1" ontouchstart="window.activate('letter-1')">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/letters/letter-button-0-1.png" id="letter-button-0-1" class="img-button deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/letters/letter-button-1-1.png" id="letter-button-1-1" class="img-button deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/letters/letter-button-2-1.png" id="letter-button-2-1" class="img-button deactivated">
                </div>
                <button class="button submit" ontouchstart="window.activate('prep')">Return</button>
            </div>
        </div>
        <!-- LETTER 0 -->
        <div id="screen-letter-0" class="controller-screen deactivated">
            <div class="controller-header"></div>
            <div class="controller-content bg-letter">
                <div id="letter-0">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/letters/letter-0-0.png" id="letter-0-0" class="full-width deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/letters/letter-1-0.png" id="letter-1-0" class="full-width deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/letters/letter-2-0.png" id="letter-2-0" class="full-width deactivated">
                </div>
                <button class="button submit" ontouchstart="window.activate('letter')">Return</button>
            </div>
        </div>
        <!-- LETTER 1 -->
        <div id="screen-letter-1" class="controller-screen deactivated">
            <div class="controller-header"></div>
            <div class="controller-content bg-letter">
                <div id="letter-1">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/letters/letter-0-1.png" id="letter-0-1" class="full-width deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/letters/letter-1-1.png" id="letter-1-1" class="full-width deactivated">
                    <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/letters/letter-2-1.png" id="letter-2-1" class="full-width deactivated">
                </div>
                <button class="button submit" ontouchstart="window.activate('letter')">Return</button>
            </div>
        </div>
        <!-- REST -->
        <div id="screen-rest" class="controller-screen deactivated">
            <div class="controller-header"></div>
            <div class="controller-content bg-rest">
                Good, let's take some rest.
                <button class="button submit" ontouchstart="window.activate('prep')">Return</button>
            </div>
        </div>
        <!-- VOTE -->
        <div id="screen-vote" class="controller-screen deactivated">
            <div class="controller-header"></div>
            <div class="controller-content">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/vote/vote-description.png" class="full-width">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/vote/yea-idle.png" id="yea-idle" class="vote" ontouchstart="window.vote('yea')">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/vote/yea-active.png" id="yea-active" class="vote deactivated">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/vote/nay-idle.png" id="nay-idle" class="vote" ontouchstart="window.vote('nay')">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/vote/nay-active.png" id="nay-active" class="vote deactivated">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/reps/rep0.png" class="full-width rep-0 deactivated">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/reps/rep1.png" class="full-width rep-1 deactivated">
                <img src="https://jeesub.github.io/assets/inventory/CivRep/imgs/reps/rep2.png" class="full-width rep-2 deactivated">
            </div>
        </div>
        <!-- TEMPLATE -->
        <div id="screen-?" class="controller-screen deactivated">
            <div class="controller-header"></div>
            <div class="controller-content">
                CONTENT
            </div>
        </div>
    </body>
</html>