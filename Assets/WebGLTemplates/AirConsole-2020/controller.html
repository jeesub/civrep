
<html>
    <head>
        <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
        <script type="text/javascript" src="https://www.airconsole.com/api/airconsole-1.7.0.js"></script>

        <style type=text/css>
            body {
                background-color: white;
            }
            .vote-button {
                border: none;
                color: white;
                padding: 15px 32px
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 20px;
                margin: 4px 2px;
            }
        </style>
      
        <script type="text/javascript">

            function App() {

                /* JavaScript / Functionality. Add functions and evens here */ 
                this.airconsole = new AirConsole({"orientation": "portrait", "synchronize_time" : "true"});

                this.airconsole.onMessage = function(from, data) {
                    // got a message
                    console.log("onMessage", from, data);
                    interpretMessage(data);
                };

                if (!("ontouchstart" in document.createElement("div"))) {
                    var elements = document.getElementsByTagName("*");
                    for (var i = 0; i < elements.length; ++i) {
                        var element = elements[i];
                        var ontouchstart = element.getAttribute("ontouchstart");
                        if (ontouchstart) {
                            element.setAttribute("onmousedown", ontouchstart);
                        }
                        var ontouchend = element.getAttribute("ontouchend");
                        if (ontouchend) {
                            element.setAttribute("onmouseup", ontouchend);
                        }
                    }
                }
            }

            /*
            App.prototype.sendMessageToScreen = function(msg) {
                console.log("sendMessageToScreen: " + msg);
                this.airconsole.message(AirConsole.SCREEN, { "action": msg });
            }
            */

            function interpretMessage(string) {
                var tmp = string.split(" ");

                switch (tmp[0]) {
                    case "System":
                        if (tmp[1] == "Look") {
                            gameLook();
                        }
                        if (tmp[1] == "Start") {
                            gameStart();
                        }
                        if (tmp[1] == "End") {
                            gameEnd();
                        }
                        break;
                    case "Player":
                        if (tmp[1] == "Admin") {
                            setAdmin();
                        }
                        if (tmp[1] == "Head") {
                            setHead();
                        }
                        if (tmp[1] == "Hands") {
                            setHands();
                        }
                        if (tmp[1] == "Legs") {
                            setLegs();
                        }
                        break;
                    default:
                        console.log("cannot find the head data!");
                        break;
                }
            }

            App.prototype.sendMessageToScreen = function(msg) {
                this.airconsole.message(AirConsole.SCREEN, msg);
            }

        </script>
     
    </head>
    <body onload="window.app = new App()">
        <div>
            <h1>Test Controller</h1>
            <button class="vote-button" ontouchstart="window.app.sendMessageToScreen({'vote' : 'Yay'})">YAY</button> 
            <button class="vote-button" ontouchstart="window.app.sendMessageToScreen({'vote' : 'Nah'})">NAH</button>
        </div>
        <div id="content"><!--Incoming messages get displayed in this container--></div>
    </body>
</html>